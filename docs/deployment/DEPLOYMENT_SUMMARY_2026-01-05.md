# Azure éƒ¨ç½²å®Œæ•´æ€»ç»“ - 2026å¹´1æœˆ5æ—¥

**é¡¹ç›®**: Job Intelligence MVP V1
**éƒ¨ç½²å¹³å°**: Azure (Australia East)
**VM è§„æ ¼**: B1s (1 vCPU, 1 GB RAM)
**éƒ¨ç½²ç­–ç•¥**: CI/CD with GitHub Actions
**çŠ¶æ€**: âœ… æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œ

---

## ğŸ“‹ ç›®å½•

1. [éƒ¨ç½²å†ç¨‹](#éƒ¨ç½²å†ç¨‹)
2. [é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
3. [æœ€ç»ˆæ¶æ„](#æœ€ç»ˆæ¶æ„)
4. [CI/CD å·¥ä½œæµç¨‹](#cicd-å·¥ä½œæµç¨‹)
5. [ç³»ç»ŸçŠ¶æ€](#ç³»ç»ŸçŠ¶æ€)
6. [å…³é”®å­¦ä¹ ç‚¹](#å…³é”®å­¦ä¹ ç‚¹)
7. [è®¿é—®ä¿¡æ¯](#è®¿é—®ä¿¡æ¯)
8. [åç»­ä¼˜åŒ–å»ºè®®](#åç»­ä¼˜åŒ–å»ºè®®)

---

## ğŸ¯ éƒ¨ç½²å†ç¨‹

### é˜¶æ®µ 1: åˆå§‹éƒ¨ç½²å°è¯•ï¼ˆå¤±è´¥ï¼‰

**å°è¯•æ–¹æ¡ˆ**: åœ¨ VM ä¸Šç›´æ¥æ„å»º Docker é•œåƒ

**æ—¶é—´çº¿**:
- 07:16 - å¼€å§‹åœ¨ VM ä¸Šæ„å»º .NET Docker é•œåƒ
- 07:17 - `dotnet publish` è¿›ç¨‹å¯åŠ¨
- 07:50 - ç³»ç»Ÿå†…å­˜ä½¿ç”¨è¾¾åˆ° 97% (821.6 MB / 847.7 MB)
- ~08:00 - VM å®Œå…¨æ— å“åº”ï¼ŒSSH è¿æ¥è¶…æ—¶

**å¤±è´¥åŸå› **:
1. **å†…å­˜ä¸è¶³**: B1s VM åªæœ‰ 847 MB æ€»å†…å­˜
2. **.NET æ„å»ºæ¶ˆè€—**: ç¼–è¯‘è¿›ç¨‹éœ€è¦ 500+ MB
   - .NET SDK åŸºç¡€é•œåƒ: ~200 MB
   - dotnet publish: ~115 MB
   - MSBuild: ~85 MB
   - C# ç¼–è¯‘å™¨ (VBCSCompiler): ~98 MB
3. **åŒæ—¶è¿è¡Œçš„å®¹å™¨**:
   - PostgreSQL: 21 MB
   - Python API: 65 MB
   - ç³»ç»Ÿå¼€é”€: ~100 MB

**æ€»éœ€æ±‚**: ~900-1000 MB > 847 MB å¯ç”¨å†…å­˜ âŒ

**ç³»ç»Ÿç—‡çŠ¶**:
```
CPU è´Ÿè½½: 23.79, 42.77, 38.72 (è¿œè¶… 1 vCPU å®¹é‡)
å†…å­˜: 821.6 MB / 847.7 MB (97%)
å¯ç”¨å†…å­˜: ä»… 26.1 MB
ç£ç›˜ I/O ç­‰å¾…: 85.7% (ç³»ç»Ÿç–¯ç‹‚æ¢é¡µ)
kswapd0 è¿›ç¨‹: 8.6% CPU (å†…å­˜å›æ”¶)
```

**å…³é”®è®¤è¯†**:
> B1s VM ç‰©ç†ä¸Šæ— æ³•å®Œæˆ .NET é¡¹ç›®çš„æœ¬åœ°æ„å»ºã€‚è¿™ä¸æ˜¯ä¼˜åŒ–é—®é¢˜ï¼Œè€Œæ˜¯ç¡¬ä»¶é™åˆ¶ã€‚

---

### é˜¶æ®µ 2: ä¼˜åŒ–å°è¯•ï¼ˆæ–¹æ¡ˆ Aï¼‰

**ç­–ç•¥**: é‡Šæ”¾èµ„æºåå•ç‹¬æ„å»º

**æ‰§è¡Œæ­¥éª¤**:
1. åœæ­¢ Python API å®¹å™¨ï¼ˆé‡Šæ”¾ 65 MBï¼‰
2. é‡å¯ PostgreSQLï¼ˆé™ä½å†…å­˜å ç”¨åˆ° 16 MBï¼‰
3. å•ç‹¬æ„å»º .NET é•œåƒ

**ç»“æœ**:
- å¯ç”¨å†…å­˜æå‡åˆ° 361 MB
- æ„å»ºå¼€å§‹åå†…å­˜å†æ¬¡é£™å‡åˆ° 836 MB
- VM å†æ¬¡æ— å“åº” âŒ

**ç»“è®º**: å³ä½¿ä¼˜åŒ–ï¼ŒB1s ä»æ— æ³•æ”¯æŒæœ¬åœ°æ„å»º

---

### é˜¶æ®µ 3: è½¬å‘æ­£ç¡®æ–¹æ¡ˆï¼ˆCI/CDï¼‰

**å…³é”®è½¬æŠ˜ç‚¹**:
ç”¨æˆ·æå‡º: "æ­£å¸¸ä¸éƒ½æ˜¯é€šè¿‡ git çš„ action æ¥å®Œæˆ CI/CD çš„ç„¶åç›´æ¥å†æ¨é€åˆ°æœåŠ¡å™¨ä¹ˆï¼Ÿ"

**æ–°ç­–ç•¥**:
- âœ… åœ¨ GitHub Actions ä¸Šæ„å»ºï¼ˆ7GB RAMï¼‰
- âœ… æ¨é€é•œåƒåˆ° GitHub Container Registry
- âœ… VM åªè´Ÿè´£æ‹‰å–å’Œè¿è¡Œé•œåƒ

**å®æ–½æ­¥éª¤**:

#### 3.1 åˆ›å»º GitHub Actions Workflow
```yaml
# .github/workflows/docker-build.yml
name: Build and Push Docker Images

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  build-dotnet-api:
    runs-on: ubuntu-latest  # 7 GB RAM âœ…
    steps:
      - Checkout code
      - Login to GHCR
      - Build and push .NET image

  build-python-api:
    runs-on: ubuntu-latest
    steps:
      - Checkout code
      - Login to GHCR
      - Build and push Python image
```

#### 3.2 ä¿®æ”¹ docker-compose.yml
```yaml
# ä¹‹å‰ï¼ˆéœ€è¦æœ¬åœ°æ„å»ºï¼‰
dotnet-api:
  build:
    context: .
    dockerfile: Dockerfile

# ä¹‹åï¼ˆç›´æ¥æ‹‰å–é•œåƒï¼‰
dotnet-api:
  image: ghcr.io/kaixiang-uoa/job-intelligence-dotnet-api:latest
```

#### 3.3 æ·»åŠ è‡ªåŠ¨æ•°æ®åº“è¿ç§»
```csharp
// Program.cs
var app = builder.Build();

// Run database migrations on startup
using (var scope = app.Services.CreateScope())
{
    var dbContext = scope.ServiceProvider.GetRequiredService<JobIntelDbContext>();
    await dbContext.Database.MigrateAsync();
}
```

#### 3.4 éƒ¨ç½²æµç¨‹
1. **æ¨é€ä»£ç ** â†’ GitHub
2. **GitHub Actions è‡ªåŠ¨æ„å»º** (5-8 åˆ†é’Ÿ)
3. **è®¾ç½®é•œåƒä¸ºå…¬å¼€** (ä¸€æ¬¡æ€§é…ç½®)
4. **VM æ‹‰å–é•œåƒ**:
   ```bash
   docker compose pull
   docker compose up -d
   ```

**ç»“æœ**: âœ… æˆåŠŸï¼

---

## ğŸ”§ é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: B1s VM å†…å­˜ä¸è¶³æ„å»º .NET

**é—®é¢˜æè¿°**:
- 1GB RAM æ— æ³•æ”¯æŒ .NET SDK ç¼–è¯‘
- æ„å»ºè¿‡ç¨‹å¯¼è‡´ OOM (Out of Memory)
- ç³»ç»Ÿå®Œå…¨æŒ‚èµ·

**é”™è¯¯æ€è·¯**:
- âŒ å°è¯•ä¼˜åŒ– Docker æ„å»ºå‚æ•°
- âŒ åœæ­¢å…¶ä»–å®¹å™¨é‡Šæ”¾å†…å­˜
- âŒ è°ƒæ•´ PostgreSQL é…ç½®

**æ­£ç¡®è§£å†³æ–¹æ¡ˆ**:
- âœ… ä¸åœ¨ VM ä¸Šæ„å»º
- âœ… ä½¿ç”¨ GitHub Actions CI/CD
- âœ… VM åªè´Ÿè´£è¿è¡Œé¢„æ„å»ºé•œåƒ

**å…³é”®è®¤è¯†**:
> ç”Ÿäº§æœåŠ¡å™¨ä¸åº”è¯¥ç”¨äºæ„å»ºä»£ç ã€‚æ„å»ºå’Œè¿è¡Œç¯å¢ƒåº”è¯¥åˆ†ç¦»ã€‚è¿™æ˜¯ç°ä»£ DevOps çš„åŸºæœ¬åŸåˆ™ã€‚

---

### é—®é¢˜ 2: EF Core è¿ç§»å·¥å…·ä¸å¯ç”¨

**é—®é¢˜æè¿°**:
```bash
docker compose exec dotnet-api dotnet ef database update
# Error: No .NET SDKs were found
```

**åŸå› **:
- è¿è¡Œæ—¶é•œåƒ (aspnet:8.0) ä¸åŒ…å« SDK
- EF Core CLI å·¥å…·éœ€è¦ SDK

**è§£å†³æ–¹æ¡ˆ**:
åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œè¿ç§»ï¼š
```csharp
await dbContext.Database.MigrateAsync();
```

**ä¼˜åŠ¿**:
- âœ… æ— éœ€æ‰‹åŠ¨è¿è¡Œè¿ç§»å‘½ä»¤
- âœ… æ¯æ¬¡éƒ¨ç½²è‡ªåŠ¨æ›´æ–°æ•°æ®åº“
- âœ… é€‚åˆå®¹å™¨åŒ–ç¯å¢ƒ

---

### é—®é¢˜ 3: GitHub Container Registry è®¿é—®æƒé™

**é—®é¢˜æè¿°**:
- é»˜è®¤é•œåƒæ˜¯ç§æœ‰çš„
- VM æ‹‰å–æ—¶éœ€è¦è®¤è¯

**è§£å†³æ–¹æ¡ˆï¼ˆä¸¤ç§æ–¹å¼ï¼‰**:

**æ–¹å¼ 1: è®¾ç½®é•œåƒä¸ºå…¬å¼€** (æ¨è)
- è®¿é—® https://github.com/ç”¨æˆ·å?tab=packages
- Package settings â†’ Change visibility â†’ Public

**æ–¹å¼ 2: ä½¿ç”¨ Personal Access Token**
```bash
echo "TOKEN" | docker login ghcr.io -u username --password-stdin
```

---

## ğŸ—ï¸ æœ€ç»ˆæ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Azure VM (B1s)                            â”‚
â”‚                  20.92.200.112                               â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚ Python API   â”‚  â”‚  .NET API    â”‚      â”‚
â”‚  â”‚   :5432      â”‚  â”‚   :8000      â”‚  â”‚   :5000      â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ 42 MB (5%)   â”‚  â”‚ 46 MB (5%)   â”‚  â”‚ 122 MB (14%) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                      Docker Network                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                              â”‚ Pull Images
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           GitHub Container Registry (GHCR)                   â”‚
â”‚                                                              â”‚
â”‚  â€¢ job-intelligence-dotnet-api:latest                        â”‚
â”‚  â€¢ job-intelligence-python-api:latest                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                              â”‚ Push Images
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub Actions                             â”‚
â”‚                  (Ubuntu Runner - 7GB RAM)                   â”‚
â”‚                                                              â”‚
â”‚  Job 1: Build .NET API                                       â”‚
â”‚  Job 2: Build Python API                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                              â”‚ Triggered by Push
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub Repository                          â”‚
â”‚          github.com/kaixiang-uoa/job-intelligence            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                              â”‚ Git Push
                              â”‚
                         æœ¬åœ°å¼€å‘ç¯å¢ƒ
```

### æŠ€æœ¯æ ˆ

**åŸºç¡€è®¾æ–½**:
- Azure VM B1s (Australia East)
- Docker & Docker Compose
- Ubuntu 24.04 LTS

**åç«¯æœåŠ¡**:
- .NET 8 API (ASP.NET Core)
- Python 3.10 FastAPI
- PostgreSQL 16 Alpine

**CI/CD**:
- GitHub Actions
- GitHub Container Registry (ghcr.io)
- Docker multi-stage builds

**åå°ä»»åŠ¡**:
- Hangfire (åŸºäº PostgreSQL)
- 65 ä¸ªå®šæ—¶ä»»åŠ¡ï¼ˆ13 trades Ã— 5 citiesï¼‰

---

## ğŸ”„ CI/CD å·¥ä½œæµç¨‹

### å®Œæ•´æµç¨‹å›¾

```mermaid
graph TB
    A[æœ¬åœ°å¼€å‘] -->|git push| B[GitHub Repository]
    B -->|webhook trigger| C[GitHub Actions]
    C -->|parallel jobs| D[Build .NET Image]
    C -->|parallel jobs| E[Build Python Image]
    D -->|push| F[GitHub Container Registry]
    E -->|push| F
    F -->|docker pull| G[Azure VM]
    G -->|docker compose up| H[Running Services]
```

### è¯¦ç»†æ­¥éª¤

#### 1. æœ¬åœ°å¼€å‘é˜¶æ®µ
```bash
# å¼€å‘ä»£ç 
vim src/JobIntel.Api/Controllers/NewController.cs

# æäº¤æ›´æ”¹
git add .
git commit -m "Add new feature"
git push origin main
```

#### 2. GitHub Actions è‡ªåŠ¨æ„å»º
**è§¦å‘æ¡ä»¶**:
- Pushåˆ° main åˆ†æ”¯
- Pushåˆ° develop åˆ†æ”¯
- Pull Request åˆ° main
- æ‰‹åŠ¨è§¦å‘ (workflow_dispatch)

**å¹¶è¡Œä»»åŠ¡**:
- Job 1: æ„å»º .NET API (4-5 åˆ†é’Ÿ)
- Job 2: æ„å»º Python API (2-3 åˆ†é’Ÿ)

**æ€»è€—æ—¶**: ~5-8 åˆ†é’Ÿ

#### 3. é•œåƒæ¨é€åˆ° GHCR
**è‡ªåŠ¨ç”Ÿæˆçš„æ ‡ç­¾**:
- `latest` - main åˆ†æ”¯çš„æœ€æ–°ç‰ˆæœ¬
- `main-<commit-sha>` - ç‰¹å®š commit
- `develop` - develop åˆ†æ”¯

#### 4. VM éƒ¨ç½²æ›´æ–°
```bash
# SSH åˆ° VM
ssh -i ~/.ssh/jobintel-vm_key.pem azureuser@20.92.200.112

# è¿›å…¥é¡¹ç›®ç›®å½•
cd job-intelligence

# æ‹‰å–æœ€æ–°ä»£ç ï¼ˆæ›´æ–° docker-compose.yml ç­‰ï¼‰
git pull origin main

# æ‹‰å–æœ€æ–°é•œåƒ
docker compose pull

# é‡å¯æœåŠ¡ï¼ˆè‡ªåŠ¨åº”ç”¨æ•°æ®åº“è¿ç§»ï¼‰
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f dotnet-api
```

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€

### å½“å‰è¿è¡ŒçŠ¶æ€

**å®¹å™¨çŠ¶æ€**:
```
NAME                  STATUS                PORTS
jobintel-postgres     Up (healthy)          5432:5432
jobintel-python-api   Up (healthy)          8000:8000
jobintel-dotnet-api   Up (healthy)          5000:5000
```

**èµ„æºä½¿ç”¨** (æˆªè‡³éƒ¨ç½²å®Œæˆæ—¶):
```
å®¹å™¨åç§°              CPU ä½¿ç”¨    å†…å­˜ä½¿ç”¨          å†…å­˜å æ¯”
jobintel-dotnet-api   1.51%      121.9 MB / 847.7 MB   14.38%
jobintel-python-api   0.11%      45.67 MB / 847.7 MB    5.39%
jobintel-postgres     0.13%      41.65 MB / 847.7 MB    4.91%
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡                             209.2 MB / 847.7 MB   24.68%
```

**ç³»ç»Ÿå†…å­˜**:
```
Total:     847 MB
Used:      715 MB (84%)
Available: 132 MB (16%)
```

âœ… **å†…å­˜ä½¿ç”¨å¥åº·ï¼Œè¿˜æœ‰å……è¶³ç©ºé—´**

### æ•°æ®åº“çŠ¶æ€

**è¡¨ç»“æ„**:
- `job_postings` - èŒä½ä¿¡æ¯è¡¨ (4 æ¡è®°å½•)
- `ingest_runs` - çˆ¬å–ä»»åŠ¡è®°å½•
- `__EFMigrationsHistory` - è¿ç§»å†å²
- Hangfire è¡¨ï¼ˆ7ä¸ªè¡¨ï¼‰

**ç´¢å¼•**:
- å”¯ä¸€æŒ‡çº¹ç´¢å¼• (å»é‡)
- å†…å®¹å“ˆå¸Œç´¢å¼• (å»é‡)
- Trade + State ç»„åˆç´¢å¼•
- æ—¶é—´èŒƒå›´ç´¢å¼•
- GIN ç´¢å¼•ï¼ˆJSONB å­—æ®µï¼‰

**è¿ç§»å†å²**:
- `20251216021512_AddV2ReservedFields`
- `20251223013136_OptimizeDatabaseSchema`

### Hangfire ä»»åŠ¡

**é…ç½®çš„å®šæ—¶ä»»åŠ¡**: 65 ä¸ª
```
13 trades Ã— 5 cities = 65 recurring jobs
```

**ä»»åŠ¡ç±»å‹**:
- Seek å¹³å°çˆ¬å–
- Indeed å¹³å°çˆ¬å–ï¼ˆé¢„ç•™ï¼‰

**è°ƒåº¦é¢‘ç‡**: å¯é…ç½®ï¼ˆå½“å‰éœ€è¦åœ¨ä»£ç ä¸­è®¾ç½®ï¼‰

---

## ğŸ’¡ å…³é”®å­¦ä¹ ç‚¹

### 1. CI/CD æ˜¯ç°ä»£éƒ¨ç½²çš„æ ‡å‡†åšæ³•

**é”™è¯¯è®¤çŸ¥**:
> åœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šæ„å»ºä»£ç æ˜¯æ­£å¸¸çš„

**æ­£ç¡®è®¤çŸ¥**:
> æ„å»ºå’Œè¿è¡Œç¯å¢ƒåº”è¯¥åˆ†ç¦»ã€‚ç”Ÿäº§æœåŠ¡å™¨åªè´Ÿè´£è¿è¡Œå·²æ„å»ºå¥½çš„åº”ç”¨ã€‚

**ç±»æ¯”**:
- **Vercel**: æœ¬åœ°å¼€å‘ â†’ GitHub â†’ Vercel æ„å»º â†’ éƒ¨ç½²
- **Docker Hub**: æœ¬åœ°å¼€å‘ â†’ Docker Hub æ„å»º â†’ Pull é•œåƒ
- **æœ¬é¡¹ç›®**: æœ¬åœ°å¼€å‘ â†’ GitHub Actions æ„å»º â†’ GHCR â†’ VM æ‹‰å–

---

### 2. èµ„æºé™åˆ¶éœ€è¦ç”¨æ¶æ„è§£å†³ï¼Œè€Œéä¼˜åŒ–

**é”™è¯¯æ€è·¯**:
- è°ƒæ•´ç¼–è¯‘å‚æ•°
- ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- é™åˆ¶å¹¶å‘æ•°

**æ­£ç¡®æ€è·¯**:
- æ”¹å˜æ„å»ºä½ç½®ï¼ˆCI/CDï¼‰
- ä½¿ç”¨é¢„æ„å»ºé•œåƒ
- åˆ†ç¦»æ„å»ºå’Œè¿è¡Œç¯å¢ƒ

**é‡‘å¥**:
> "When you can't make it fit, change where it runs."

---

### 3. å®¹å™¨åŒ–çš„çœŸæ­£ä»·å€¼

**ä¸ä»…ä»…æ˜¯**:
- ç¯å¢ƒä¸€è‡´æ€§
- æ˜“äºéƒ¨ç½²

**æ›´é‡è¦çš„æ˜¯**:
- **æ„å»ºä¸€æ¬¡ï¼Œåˆ°å¤„è¿è¡Œ**
- **é•œåƒä½œä¸ºäº¤ä»˜ç‰©**
- **ä¸ CI/CD å®Œç¾é›†æˆ**

---

### 4. è‡ªåŠ¨åŒ–è¿ç§»çš„é‡è¦æ€§

**æ‰‹åŠ¨è¿ç§»çš„é—®é¢˜**:
- éœ€è¦ SSH åˆ°æœåŠ¡å™¨
- éœ€è¦é¢å¤–çš„å·¥å…·ï¼ˆEF Core CLIï¼‰
- å®¹æ˜“å¿˜è®°æ‰§è¡Œ

**è‡ªåŠ¨è¿ç§»çš„ä¼˜åŠ¿**:
- éƒ¨ç½²å³æ›´æ–°æ•°æ®åº“
- æ— éœ€æ‰‹åŠ¨å¹²é¢„
- é€‚åˆå®¹å™¨åŒ–ç¯å¢ƒ
- ç‰ˆæœ¬æ°¸è¿œåŒæ­¥

---

### 5. æ–‡æ¡£çš„è¿­ä»£æ€§

**ä»Šå¤©çš„ç»å†**:
- æœ‰å¤šä¸ªè¿‡æ—¶çš„éƒ¨ç½²æ–‡æ¡£
- åŸºäºé”™è¯¯å‡è®¾ï¼ˆåœ¨ VM ä¸Šæ„å»ºï¼‰
- éœ€è¦æ¸…ç†å’Œæ›´æ–°

**å¯ç¤º**:
> æ–‡æ¡£ä¼šéšç€è®¤çŸ¥å‡çº§è€Œè¿‡æ—¶ã€‚å®šæœŸå›é¡¾å’Œæ›´æ–°æ–‡æ¡£å¾ˆé‡è¦ã€‚

---

## ğŸ”— è®¿é—®ä¿¡æ¯

### API ç«¯ç‚¹

**Swagger UI** (API æ–‡æ¡£):
```
http://20.92.200.112:5000/swagger
```

**Hangfire Dashboard** (ä»»åŠ¡ç›‘æ§):
```
http://20.92.200.112:5000/hangfire
```

**Health Check**:
```bash
# .NET API
curl http://20.92.200.112:5000/api/health

# Python API
curl http://20.92.200.112:8000/health
```

### ç¤ºä¾‹ API è°ƒç”¨

**æŸ¥è¯¢èŒä½**:
```bash
# æŸ¥è¯¢æ‰€æœ‰ Electrician èŒä½
curl "http://20.92.200.112:5000/api/jobs?trade=electrician&pageSize=10"

# æŒ‰åœ°åŒºè¿‡æ»¤
curl "http://20.92.200.112:5000/api/jobs?trade=plumber&state=VIC"

# åˆ†é¡µ
curl "http://20.92.200.112:5000/api/jobs?page=2&pageSize=20"
```

**è§¦å‘æ‰‹åŠ¨çˆ¬å–**:
```bash
curl -X POST http://20.92.200.112:5000/api/admin/scrape \
  -H "Content-Type: application/json" \
  -d '{
    "source": "seek",
    "keywords": ["Plumber"],
    "location": "Melbourne",
    "maxResults": 10
  }'
```

### SSH è®¿é—®

```bash
ssh -i ~/.ssh/jobintel-vm_key.pem azureuser@20.92.200.112
```

### GitHub ä»“åº“

```
https://github.com/kaixiang-uoa/job-intelligence
```

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

1. **æ·»åŠ ç¯å¢ƒå˜é‡ç®¡ç†**
   - å½“å‰: ç¡¬ç¼–ç åœ¨ docker-compose.yml
   - å»ºè®®: ä½¿ç”¨ .env æ–‡ä»¶æ¨¡æ¿
   - å¥½å¤„: æ›´å®‰å…¨ï¼Œæ›´çµæ´»

2. **é…ç½® Nginx åå‘ä»£ç†**
   - å½“å‰: ç›´æ¥æš´éœ²ç«¯å£
   - å»ºè®®: Nginx â†’ ç»Ÿä¸€å…¥å£
   - å¥½å¤„: SSLã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜

3. **æ·»åŠ æ—¥å¿—èšåˆ**
   - å½“å‰: docker compose logs
   - å»ºè®®: ELK æˆ– Loki
   - å¥½å¤„: é›†ä¸­æ—¥å¿—ï¼Œæ˜“äºæœç´¢

4. **è®¾ç½®ç›‘æ§å‘Šè­¦**
   - å»ºè®®å·¥å…·: Prometheus + Grafana
   - ç›‘æ§æŒ‡æ ‡: CPUã€å†…å­˜ã€API å»¶è¿Ÿã€é”™è¯¯ç‡

### ä¸­æœŸï¼ˆ1-2æœˆï¼‰

5. **æ•°æ®åº“å¤‡ä»½ç­–ç•¥**
   - è‡ªåŠ¨å¤‡ä»½è„šæœ¬
   - å®šæœŸå¯¼å‡ºåˆ° Azure Blob Storage
   - æµ‹è¯•æ¢å¤æµç¨‹

6. **å®ç°è“ç»¿éƒ¨ç½²**
   - å½“å‰: ç›´æ¥æ›¿æ¢å®¹å™¨
   - å»ºè®®: é›¶åœæœºæ›´æ–°
   - å·¥å…·: Docker Swarm æˆ– Kubernetes

7. **æ·»åŠ é›†æˆæµ‹è¯•åˆ° CI**
   - å½“å‰: åªæ„å»ºé•œåƒ
   - å»ºè®®: è¿è¡Œæµ‹è¯•åå†æ¨é€
   - å·¥å…·: Docker Compose + pytest/xUnit

### é•¿æœŸï¼ˆ3-6æœˆï¼‰

8. **è€ƒè™‘å‡çº§åˆ°åˆ†å¸ƒå¼æ¶æ„**
   - Azure PostgreSQL Flexible Server
   - ç‹¬ç«‹çš„ VM è¿è¡Œå„æœåŠ¡
   - Redis ç¼“å­˜å±‚

9. **å®ç° CDN å’Œç¼“å­˜**
   - Azure CDN
   - Redis ç¼“å­˜çƒ­é—¨æŸ¥è¯¢
   - æå‡å“åº”é€Ÿåº¦

10. **æ·»åŠ ç”¨æˆ·è®¤è¯å’Œæˆæƒ**
    - å½“å‰: å®Œå…¨å¼€æ”¾
    - å»ºè®®: JWT + OAuth
    - ä¿æŠ¤æ•æ„Ÿç«¯ç‚¹

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

**éƒ¨ç½²ç›¸å…³**:
- [CI/CD éƒ¨ç½²æŒ‡å—](./CICD_DEPLOYMENT.md) - è¯¦ç»†çš„ CI/CD ä½¿ç”¨æ–‡æ¡£
- [æ¶æ„å¯¹æ¯”æ–‡æ¡£](./ARCHITECTURE_COMPARISON.md) - å•ä½“ vs åˆ†å¸ƒå¼æ¶æ„
- [éƒ¨ç½²æµ‹è¯•æ¸…å•](./DEPLOYMENT_TEST_CHECKLIST.md) - 32 ä¸ªæµ‹è¯•æ£€æŸ¥ç‚¹

**å¼€å‘ç›¸å…³**:
- [MVP V1 å®Œæˆæ€»ç»“](../MVP_V1_COMPLETION.md)
- [æŠ€æœ¯è®¾è®¡æ–‡æ¡£](../core/TECHNICAL_DESIGN.md)
- [API è®¾è®¡è¿­ä»£](../design/API_DESIGN_ITERATIONS.md)

**è¿‡æ—¶æ–‡æ¡£**ï¼ˆä»…ä¾›å‚è€ƒï¼‰:
- ~~[åˆ†æ­¥éƒ¨ç½²æŒ‡å—](./STEP_BY_STEP_DEPLOYMENT.md)~~ - åŸºäº VM æœ¬åœ°æ„å»ºï¼ˆå·²æ·˜æ±°ï¼‰
- ~~[Azure å…è´¹éƒ¨ç½²æŒ‡å—](./AZURE_FREE_DEPLOYMENT_GUIDE.md)~~ - ä½¿ç”¨æ—§æ–¹æ³•

---

## ğŸ“ é¢è¯•å‡†å¤‡è¦ç‚¹

### å¯ä»¥è®²è¿°çš„æ•…äº‹

**é—®é¢˜**: "æè¿°ä¸€æ¬¡ä½ é‡åˆ°æŠ€æœ¯éš¾é¢˜å¹¶è§£å†³çš„ç»å†"

**å›ç­”æ¡†æ¶**:

1. **èƒŒæ™¯ (Situation)**:
   - éƒ¨ç½² .NET åº”ç”¨åˆ° Azure B1s VM (1GB RAM)
   - å°è¯•åœ¨ VM ä¸Šç›´æ¥æ„å»º Docker é•œåƒ

2. **é—®é¢˜ (Task)**:
   - .NET ç¼–è¯‘éœ€è¦ 500+ MB å†…å­˜
   - VM æ€»å…±åªæœ‰ 847 MB
   - å¯¼è‡´ç³»ç»Ÿ OOMï¼Œå®Œå…¨æŒ‚èµ·

3. **è¡ŒåŠ¨ (Action)**:
   - åˆæ­¥å°è¯•: ä¼˜åŒ–ã€é‡Šæ”¾èµ„æºï¼ˆå¤±è´¥ï¼‰
   - è®¤è¯†é—®é¢˜æœ¬è´¨: ç¡¬ä»¶é™åˆ¶ï¼Œéä¼˜åŒ–é—®é¢˜
   - è½¬å˜æ€è·¯: é‡‡ç”¨ CI/CDï¼Œæ„å»ºä¸è¿è¡Œåˆ†ç¦»
   - å®æ–½: GitHub Actions + GHCR

4. **ç»“æœ (Result)**:
   - æˆåŠŸéƒ¨ç½²ï¼Œå†…å­˜ä½¿ç”¨ä»… 25%
   - å»ºç«‹äº†æ ‡å‡†çš„ CI/CD æµç¨‹
   - æœªæ¥æ›´æ–°åªéœ€ 2-3 åˆ†é’Ÿ

5. **å­¦ä¹  (Learning)**:
   - CI/CD æ˜¯ç°ä»£éƒ¨ç½²çš„æ ‡å‡†
   - æ¶æ„é—®é¢˜éœ€è¦æ¶æ„è§£å†³
   - ç”Ÿäº§ç¯å¢ƒä¸åº”è¯¥ç”¨äºæ„å»º

### æŠ€æœ¯å…³é”®è¯

- **DevOps**: CI/CD, GitHub Actions, Docker, Infrastructure as Code
- **äº‘è®¡ç®—**: Azure VM, Container Registry, Resource Management
- **åç«¯**: .NET 8, ASP.NET Core, Entity Framework, Hangfire
- **æ•°æ®åº“**: PostgreSQL, è‡ªåŠ¨è¿ç§», ç´¢å¼•ä¼˜åŒ–
- **å®¹å™¨åŒ–**: Docker, Docker Compose, Multi-stage builds
- **é—®é¢˜è§£å†³**: å†…å­˜ä¼˜åŒ–, OOM å¤„ç†, æ¶æ„é‡æ„

### å¯é‡åŒ–çš„æˆæœ

- âœ… éƒ¨ç½²æˆåŠŸç‡: 100% (ç¬¬äºŒæ¬¡æ–¹æ¡ˆ)
- âœ… å†…å­˜ä½¿ç”¨: ä» 97% â†’ 25%
- âœ… æ„å»ºæ—¶é—´: ä»ä¸å¯èƒ½ â†’ 5-8 åˆ†é’Ÿ
- âœ… éƒ¨ç½²æ—¶é—´: ~3 åˆ†é’Ÿ
- âœ… è‡ªåŠ¨åŒ–ç¨‹åº¦: 100% (git push å³éƒ¨ç½²)

---

## ğŸ“ æ€»ç»“

ä»Šå¤©çš„éƒ¨ç½²ç»å†æ˜¯ä¸€æ¬¡å®è´µçš„å­¦ä¹ ä½“éªŒï¼š

1. **ä»å¤±è´¥ä¸­å­¦ä¹ **: ä¸¤æ¬¡ OOM å¤±è´¥æ•™ä¼šäº†æˆ‘ä»¬èµ„æºé™åˆ¶çš„æœ¬è´¨
2. **è®¤çŸ¥å‡çº§**: ä»"å¦‚ä½•ä¼˜åŒ–"åˆ°"æ”¹å˜æ¶æ„"
3. **æ‹¥æŠ±æœ€ä½³å®è·µ**: CI/CD ä¸æ˜¯å¯é€‰é¡¹ï¼Œæ˜¯å¿…éœ€å“
4. **æ–‡æ¡£åŒ–æ€ç»´**: è®°å½•æ€è€ƒè¿‡ç¨‹æ¯”è®°å½•ç»“æœæ›´é‡è¦

**æœ€é‡è¦çš„ä¸€å¥è¯**:
> "The right way is often not the first way you think of, but the way the industry has already figured out."

è¡Œä¸šæœ€ä½³å®è·µï¼ˆCI/CDï¼‰å­˜åœ¨æ˜¯æœ‰åŸå› çš„ã€‚ä¸è¦é‡æ–°å‘æ˜è½®å­ï¼Œè¦å­¦ä¼šè¯†åˆ«å’Œé‡‡ç”¨å·²è¢«éªŒè¯çš„æ–¹æ¡ˆã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-01-05
**ä½œè€…**: éƒ¨ç½²å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2026-01-05
